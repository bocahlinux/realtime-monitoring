<!DOCTYPE html>
<html lang="id">
  <head>
    <%- include('partials/head', { title: title || "Profil Pengguna" }) %>
  </head>

  <body class="bg-gray-50 dark:bg-govdark min-h-screen text-slate-800 dark:text-slate-100">
    <!-- NAVBAR -->
    <%- include('partials/navbar', { title: "Profil Pengguna" }) %>

    <div class="flex min-h-screen">
      
      <!-- SIDEBAR -->
      <%- include('partials/sidebar', { activePage: 'profil' }) %>

      <!-- MAIN -->
      <main class="flex-1  mt-[60px] w-full layout-container-separo px-4 sm:px-6 lg:px-8 py-4 sm:py-6 space-y-6">
        <h1 class="text-2xl font-bold">Profil Pengguna</h1>
        <!-- Card Data Profil -->
        <section class="p-6 bg-white dark:bg-govgray rounded-xl shadow border border-slate-200 dark:border-slate-700">

          <h2 class="text-lg font-semibold mb-4">Informasi Akun</h2>

          <!-- Username -->
          <div class="mb-4">
            <label class="text-sm font-medium">Username</label>
            <input type="text" disabled value="<%= user.username %>"
              class="w-full mt-1 px-3 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 border border-slate-300 dark:border-slate-700">
          </div>

          <!-- Nama -->
          <form action="/profil/update" method="POST" class="mb-6">
            <label class="text-sm font-medium">Nama Lengkap</label>
            <input name="nama" type="text" value="<%= user.nama %>"
              class="w-full mt-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700">

            <button class="mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">
              Update Profil
            </button>
          </form>

          <!-- Password -->
          <h2 class="text-lg font-semibold mb-4">Ubah Password</h2>

          <form action="/profil/password" method="POST" class="space-y-3">
            <div>
              <label class="text-sm font-medium">Password Lama</label>
              <input type="password" name="old_password"
                class="w-full mt-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700">
            </div>

            <div>
              <label class="text-sm font-medium">Password Baru</label>
              <input type="password" name="new_password"
                class="w-full mt-1 px-3 py-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-300 dark:border-slate-700">
            </div>

            <button class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
              Simpan Password
            </button>
          </form>

          <!-- Created At -->
          <p class="mt-8 text-xs text-gray-500 dark:text-slate-400">
            Akun dibuat pada:
            <span class="font-medium text-gray-700 dark:text-slate-200">
              <% if (user.created_at) { %>
                <%= user.created_at.toLocaleDateString("id-ID", {
                  year: "numeric",
                  month: "long",
                  day: "numeric",
                  hour: "2-digit",
                  minute: "2-digit"
                }) %>
              <% } else { %>
                -
              <% } %>

            </span>
          </p>

        </section>
      </main>
    </div>
    <script>
      if (typeof snackbar  !== "undefined" && snackbar ) {
          showSnackbar("<%= snackbar  %>", "<%= snackbarType || 'success' %>");
      }
    </script>
  </body>
</html>
