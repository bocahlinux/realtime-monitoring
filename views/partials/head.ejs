<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title><%= subtitle || title || "DIGI LAPOR" %> | DIGI LAPOR</title>

<link rel="icon" href="/favicon.ico" />

<!-- SNACKBAR -->
<div id="snackbar"
     class="hidden fixed bottom-4 left-1/2 -translate-x-1/2 px-6 py-3 rounded-lg shadow-xl
            bg-gray-900 text-white z-[9999] min-w-[260px] max-w-[90%]
            flex items-center justify-between gap-3 animate-snack">
  <span id="snackbar-message" class="text-sm"></span>
  <button onclick="hideSnackbar()" class="text-xs opacity-80 hover:opacity-100">Tutup</button>
</div>

<!-- Tailwind CDN -->
<script src="https://cdn.tailwindcss.com"></script>
<script src="/js/theme.js"></script>
<script>
  tailwind.config = {
    darkMode: "class",
    theme: {
      extend: {
        colors: {
          govdark: "#020617",   // background utama dark
          govnavy: "#0F1E4D",   // navbar / sidebar
          govgray: "#111827",   // card / panel
        }
      }
    }
  };
  
  function showToast(msg, type = "success") {
    const toast = document.getElementById("toast");
    const text = document.getElementById("toast-message");

    text.textContent = msg;

    // warna
    if (type === "success") {
      toast.classList.remove("bg-red-600");
      toast.classList.add("bg-green-600");
    } else {
      toast.classList.remove("bg-green-600");
      toast.classList.add("bg-red-600");
    }

    toast.classList.remove("hidden");

    setTimeout(() => {
      toast.classList.add("hidden");
    }, 3000);
  }

  let snackbarTimer = null;

  function showSnackbar(message, type = "success") {
    const bar = document.getElementById("snackbar");
    const msg = document.getElementById("snackbar-message");

    msg.textContent = message;

    // warna tema
    if (type === "success") {
      bar.classList.remove("bg-red-600");
      bar.classList.add("bg-green-600");
    } else {
      bar.classList.remove("bg-green-600");
      bar.classList.add("bg-red-600");
    }

    bar.classList.remove("hidden");

    clearTimeout(snackbarTimer);
    snackbarTimer = setTimeout(() => {
      hideSnackbar();
    }, 3200);
  }

  function hideSnackbar() {
    const bar = document.getElementById("snackbar");
    bar.classList.add("hidden");
  }

  window.USER_UPT = "<%= authUser?.upt || '' %>";
</script>

<!-- Font -->
<link
  href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
  rel="stylesheet"
/>

<!-- Custom CSS (kalau ada) -->
<link rel="stylesheet" href="/css/custom.css" />
